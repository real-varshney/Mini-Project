<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <link rel="icon" type="image/png" sizes="32x32" href="./favicon_io/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./favicon_io/favicon-16x16.png">

    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <title>Document</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Raleway&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            margin-bottom: 10px;
            padding: 0;
            font-size: 1.1rem;
            font-family: 'Raleway', sans-serif;
        }

        .head {
            margin: 1rem 0 0 0;
            display: flex;
            justify-content: space-around;

            align-items: center;
        }

        body {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        .sp {
            justify-content: space-evenly;
        }

        .que {
            width: 45vw;
        }

        .body {
            display: flex;
            justify-content: space-around;
            margin-top: 50px;
        }

        #paper {
            width: 50vw;
            margin-left: 8vw;
        }

        .hh {
            display: -webkit-inline-box;
        }

        .prp {
            position: relative;
            left: 13vw;
            width: 20vw;
            height: 50px;
            margin: 20px 0 0 0;
        }

        #quizname {
            font-size: 2rem;
        }
    </style>

</head>

<body>
    <div class="main">
        <div class="head">
            <button class="btn btn-primary" style="float: left;"  id="return" >ðŸ“¤Leave</button>
            <img src="./img/logo.png" alt="Scrutiny_logo">
            <span id="quizname" class="text-danger">Sample-1</span>
        </div>

        <div class="body">
            <form id="paper">
                <div class="form-row mt-5 sp">


                    <div id="add">
                    </div>
                    <button type="button" class="btn btn-outline-primary prp" id="calc">Submit</button>
                </div>
        </div>
        </form>
    </div>
    </div>
    <div class="footer text-center">
        Â© Copyright 2022 - 2025 Scrutiny
    </div>





    <script type="module">


        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.13.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.13.0/firebase-analytics.js";
        import { getFirestore, collection, getDoc, addDoc, doc, getDocs } from "https://www.gstatic.com/firebasejs/9.13.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDwquClXelyimODKdx5YtafUJA2xBa_iy0",
            authDomain: "scrutiny-42e5b.firebaseapp.com",
            databaseURL: "https://scrutiny-42e5b-default-rtdb.firebaseio.com",
            projectId: "scrutiny-42e5b",
            storageBucket: "scrutiny-42e5b.appspot.com",
            messagingSenderId: "706713208040",
            appId: "1:706713208040:web:85dbcdf6f73ffb54fc755d",
            measurementId: "G-HY0Y3GYKDG"
        };

        // Initialize Firebase   
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        firebase.initializeApp(firebaseConfig);
        const db = getFirestore(app);
        var data = new Object();
        var return2 = document.getElementById('return');


        function addCode(count) {
            document.getElementById("add").innerHTML +=
                `<div class="mb-3">
                        <label class="input-group-text d-table" id="us2">Question ${count}</label>
                        <textarea class="form-control w-5 que" aria-label="With textarea" id="que${count}"
                            placeholder="Add Question..." readonly onselectstart="return false" onpaste="return false;"
                            onCopy="return false" onCut="return false" onDrag="return false" onDrop="return false">
                        </textarea>


                        <div class="opt mt-4">
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="gridRadios-${count}" id="gridRadios1-${count}"
                                    value="option1">
                                <label class="form-check-label" for="gridRadios1" id="op-1-${count}">

                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="gridRadios-${count}" id="gridRadios1-${count}"
                                    value="option2">
                                <label class="form-check-label" for="gridRadios1" id="op-2-${count}" >

                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="gridRadios-${count}" id="gridRadios1-${count}"
                                    value="option3">
                                <label class="form-check-label" for="gridRadios1" id="op-3-${count}">

                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="gridRadios-${count}" id="gridRadios1-${count}"
                                    value="option4">
                                <label class="form-check-label" for="gridRadios1" id="op-4-${count}">

                                </label>
                            </div>
                        </div>
                    </div>`
        }

        const value = 5;
        window.onload = async function () {
            sessionStorage.clear();
            for (var i = 1; i <= value; i++) {
                addCode(i);
                const querySnapshot = await getDocs(collection(db, "vish", "sample-1", `Q${i}`));
                querySnapshot.forEach((doc) => {
                    data = doc.data();
                });

                const que = document.getElementById(`que${i}`);
                const op1 = document.getElementById(`op-1-${i}`);
                const op2 = document.getElementById(`op-2-${i}`);
                const op3 = document.getElementById(`op-3-${i}`);
                const op4 = document.getElementById(`op-4-${i}`);

                que.innerText += data.question;
                op1.innerText += data.option1;
                op2.innerText += data.option2;
                op3.innerText += data.option3;
                op4.innerText += data.option4;
                sessionStorage.setItem(`q${i}`, `${data.crans}`)
            }
        }
    


        const calc = document.getElementById("calc");
        var count2 = 0;

        calc.addEventListener('click', () => {

            for (var i = 1; i <= value; i++) {
                var radios = document.getElementsByName(`gridRadios-${i}`);
                var crans = null;
                for (var radio of radios) {
                    if (radio.checked) {
                        crans = radio.value;
                    }
                }
                if (crans == sessionStorage.getItem(`q${i}`)) {
                    sessionStorage.setItem(`Q${i}-SELECTED`, 'correct')
                    count2++;
                }
                else {
                    sessionStorage.setItem(`Q${i}-SELECTED`, 'Wrong')
                }
            }

            sessionStorage.setItem('Total', count2);
            alert("Answer Submitted successfully");
            
            window.location = 'result.html';
        });



        return2.addEventListener('click', () => {
            alert("You left the quiz without any submission");
            window.location = 'index.html';
        })

    </script>
</body>

</html>